define(["exports","core/modal","editor_tiny/options"],(function(e,t,n){"use strict";class i extends t{static TYPE="tiny_pumukitmedia/modal";static TEMPLATE="tiny_pumukitmedia/modal";registerEventListeners(){this.setRemoveOnClose(!0),super.registerEventListeners(),this.registerCloseOnCancel()}}i.registerModalType();
/**
     * Tiny Pumukitmedia common values.
     *
     * @module      tiny_pumukitmedia/common
     * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
     */
const o="tiny_pumukitmedia/plugin",s=n.getPluginOptionName(o,"pumukitmediaurl"),a=n.getPluginOptionName(o,"dialogtitle"),l=n.getPluginOptionName(o,"username"),r=n.getPluginOptionName(o,"email"),m=n.getPluginOptionName(o,"hash");
/**
     * Options helper for the Moodle Tiny Pumukitmedia plugin.
     *
     * @module      tiny_pumukitmedia/options
     * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
     */e.openPumukitDialogue=async e=>{const t=(e=>e.options.get(a))(e),n=(e=>e.options.get(s))(e),o=(e=>e.options.get(m))(e),d=(e=>e.options.get(l))(e),p=(e=>e.options.get(r))(e),u=document.documentElement.lang||"en",c={modaltitle:t,pumukitUrl:n,hash:o,username:d,email:p,lang:u};try{const t=await i.create({templateContext:c,large:!0});t.show(),t.getRoot().on("click",".nav-tabs .nav-link",(function(e){e.preventDefault();const n=$(this),i=t.getRoot().find(n.attr("href"));t.getRoot().find(".nav-tabs .nav-link").removeClass("active"),t.getRoot().find(".tab-pane").removeClass("show active"),n.addClass("active"),i.addClass("show active")}));const o=i=>{const s=i.data;if(!s||!s.mmId&&!s.url&&!s.playlist)return;let a="";s.url?a=s.url:s.playlist?a=`${n}/openedx/openedx/playlist/embed/${s.playlist}`:s.mmId&&(a=`${n}/openedx/openedx/embed/${s.mmId}`);const l=`\n                <div class="embed-responsive embed-responsive-16by9">\n                    <iframe \n                        class="embed-responsive-item" \n                        src="${a}" \n                        width="100%" \n                        height="400" \n                        frameborder="0" \n                        allowfullscreen \n                        allow="microphone; camera; display-capture">\n                    </iframe>\n                </div>\n            `;e.insertContent(l),t.hide(),window.removeEventListener("message",o)};window.addEventListener("message",o),t.getRoot().on("hidden.bs.modal",(()=>{window.removeEventListener("message",o)}))}catch(e){console.error("Error creando la modal de PuMuKIT:",e)}}}));
//# sourceMappingURL=dialogue.min.js.map
